<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Learn RSpec 02</title>
        <meta name="description" content="This presentation is generated by vim-reveal and reveal.js.">
        <meta name="author" content="author">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="../../css/reveal.css">
        <link rel="stylesheet" href="../../css/theme/solarized.css" id="theme">
        <link rel="stylesheet" href="../../lib/css/zenburn.css">
        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="../../css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>
        <!--[if lt IE 9]>
        <script src="../../lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="reveal">
            <div class="slides">

<section>
<section data-markdown >
<script type="text/template">
# What does an RSpec test look like?

</script>
</section>
<section data-markdown >
<script type="text/template">
```ruby
describe 'some class name' do
  it 'works correctly' do
    expect(1 + 1).to eq 2
  end
end
```

Note:
describe is used to set up the RSpec test and gives us access to the RSpec DSL
it is a function that takes a description and a block (which is the actual test)
</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## Great! We have RSpec up and working, let's test a method

</script>
</section>
<section data-markdown >
<script type="text/template">
```ruby
class TestClass
  def add_one_to(num)
    num + 1
  end
end

describe TestClass do
  it 'works correctly' do
    expect(subject.add_one_to(1)).to eq 2
  end
end
```

</script>
</section>
<section data-markdown >
<script type="text/template">
## ...where did subject come from?

</script>
</section>
<section data-markdown >
<script type="text/template">
`subject` is an RSpec helper that creates a new object of the class being described

</script>
</section>
<section data-markdown >
<script type="text/template">
## How do we know a test is passing for the reason I expect?

</script>
</section>
<section data-markdown >
<script type="text/template">
A common practice is to make a test fail by changing the expectation

Note:
This also let's us be sure the test will fail if something changes

</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## What if my test needs more context than I can put in a single line?

</script>
</section>
<section data-markdown >
<script type="text/template">
`context`

</script>
</section>
<section data-markdown >
<script type="text/template">
```ruby
class TestClass
  def add_one_to(num)
    num + 1
  end
end

describe TestClass do
  context 'when adding one to one' do
    it 'works correctly' do
      expect(subject.add_one_to(1)).to eq 2
    end
  end
end
```

Note:
Like describe and it, context is also a function that takes a description and a block
You can also nest contexts and describes as deeply as you'd like
It's common to try to make the contexts and describes read well when read together because of how it's ouput from the console

</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## Neat, what if I need to set up some conditions for my test?

</script>
</section>
<section data-markdown >
<script type="text/template">
That's what a `before` does!

</script>
</section>
<section data-markdown >
<script type="text/template">
```ruby
class TestClass
  def add_one_to(num)
    num + 1
  end
end

describe TestClass do
  context 'when adding one to one' do
    before do
      @num = 1
    end

    it 'works correctly' do
      expect(subject.add_one_to(@num)).to eq 2
    end
  end
end
```

Note:
A before can be used to do more useful things like log in as a user or navigate to a page

</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## Okay, how about if I need data for my test?

</script>
</section>
<section data-markdown >
<script type="text/template">
## `let` and `let!`

</script>
</section>
<section data-markdown >
<script type="text/template">
```ruby
class TestClass
  def add_one_to(num)
    num + 1
  end
end

describe TestClass do
  context 'when adding one to one' do
    let(:num) { 1 }

    it 'works correctly' do
      expect(subject.add_one_to(num)).to eq 2
    end
  end
end
```

Note:
The difference between let and let! is that the let! will be run no matter what, where regular let isn't evaluated until it's used

</script>
</section>
</section>
<section data-markdown >
<script type="text/template">
[Next Steps](learn-rspec-03.html)
</script>
</section>
</section>
            </div>
        </div>
        <script src="../../lib/js/head.min.js"></script>
        <script src="../../js/reveal.js"></script>
        <script>
            Reveal.initialize({
                controls: true,
                progress: true,
                history: false,
                keyboard: true,
                touch: true,
                center: true,
                loop: false,
                rtl: false,
                mouseWheel: false,
                margin: 0.1,
                minScale: 0.2,
                maxScale: 1.0,
                autoSlide: 0,
                width: 960,
                height: 900,
                theme: 'solarized',
                transition: 'default',
                transitionSpeed: 'default',
                backgroundTransition: 'default',
                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: '../../lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: '../../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: '../../plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: '../../plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: '../../plugin/math/math.js', async: true }
                ]
            });
        </script>
    </body>
</html>
