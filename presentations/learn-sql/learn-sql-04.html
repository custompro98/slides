<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Learn SQL 04</title>
        <meta name="description" content="This presentation is generated by vim-reveal and reveal.js.">
        <meta name="author" content="author">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="../../css/reveal.css">
        <link rel="stylesheet" href="../../css/theme/solarized.css" id="theme">
        <link rel="stylesheet" href="../../lib/css/zenburn.css">
        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="../../css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>
        <!--[if lt IE 9]>
        <script src="../../lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>
        <div class="reveal">
            <div class="slides">

<section>
<section data-markdown >
<script type="text/template">
## Aggregations

</script>
</section>
<section data-markdown >
<script type="text/template">
- `COUNT`
- `MIN`
- `MAX`

</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## How can we see the count of posts?

</script>
</section>
<section data-markdown >
<script type="text/template">
```sql
SELECT COUNT(posts.id)
FROM   posts
```

</script>
</section>
<section data-markdown >
<script type="text/template">
## How can we see the count of posts per author?

</script>
</section>
<section data-markdown >
<script type="text/template">
```sql
SELECT author_id, COUNT(posts.id)
FROM   posts
GROUP BY author_id
```

</script>
</section>
<section data-markdown >
<script type="text/template">
## The author id is neat, but can we see the author's name?

</script>
</section>
<section data-markdown >
<script type="text/template">
```sql
SELECT authors.name, COUNT(posts.id)
FROM   posts
JOIN   authors ON posts.author_id = authors.id
GROUP BY authors.name
```

Note:
If we're going to GROUP BY something, it needs to appear in the SELECT and vice versa.  This is more reasonable when we think about it in terms of needing to see what the aggregate is associated with. i.e. the COUNT needs a label to describe what it's counting.
</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## Can we order by COUNT?

</script>
</section>
<section data-markdown >
<script type="text/template">
Yes, just like we'd expect
```sql
SELECT authors.name, COUNT(posts.id)
FROM   posts
JOIN   authors ON posts.author_id = authors.id
GROUP BY authors.name
ORDER BY COUNT(posts.id) DESC
```

</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## What if we only want to see authors with more than 6 posts?

</script>
</section>
<section data-markdown >
<script type="text/template">
We also have the `HAVING` clause!

</script>
</section>
<section data-markdown >
<script type="text/template">
```sql
SELECT authors.name, COUNT(posts.id) AS post_count
FROM   posts
JOIN   authors ON posts.author_id = authors.id
GROUP BY authors.name
HAVING post_count > 6
```

</script>
</section>
</section>
<section>
<section data-markdown >
<script type="text/template">
## And now you know the basics of querying in SQL

</script>
</section>
<section data-markdown >
<script type="text/template">
Have fun ðŸ˜ƒ
</script>
</section>
</section>
            </div>
        </div>
        <script src="../../lib/js/head.min.js"></script>
        <script src="../../js/reveal.js"></script>
        <script>
            Reveal.initialize({
                controls: true,
                progress: true,
                history: false,
                keyboard: true,
                touch: true,
                center: true,
                loop: false,
                rtl: false,
                mouseWheel: false,
                margin: 0.1,
                minScale: 0.2,
                maxScale: 1.0,
                autoSlide: 0,
                width: 960,
                height: 900,
                theme: 'solarized',
                transition: 'default',
                transitionSpeed: 'default',
                backgroundTransition: 'default',
                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: '../../lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: '../../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: '../../plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: '../../plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: '../../plugin/math/math.js', async: true }
                ]
            });
        </script>
    </body>
</html>
